!function($,window,document,undefined){function Plugin(element,options){this.element=element,this.options=$.extend({},defaults,options),this._defaults=defaults,this._name=pluginName,this.init()}var pluginName="stellar",defaults={scrollProperty:"scroll",positionProperty:"position",horizontalScrolling:!0,verticalScrolling:!0,horizontalOffset:0,verticalOffset:0,responsive:!1,parallaxBackgrounds:!0,parallaxElements:!0,hideDistantElements:!0,hideElement:function($elem){$elem.hide()},showElement:function($elem){$elem.show()}},scrollProperty={scroll:{getLeft:function($elem){return $elem.scrollLeft()},setLeft:function($elem,val){$elem.scrollLeft(val)},getTop:function($elem){return $elem.scrollTop()},setTop:function($elem,val){$elem.scrollTop(val)}},position:{getLeft:function($elem){return-1*parseInt($elem.css("left"),10)},getTop:function($elem){return-1*parseInt($elem.css("top"),10)}},margin:{getLeft:function($elem){return-1*parseInt($elem.css("margin-left"),10)},getTop:function($elem){return-1*parseInt($elem.css("margin-top"),10)}},transform:{getLeft:function($elem){var computedTransform=getComputedStyle($elem[0])[prefixedTransform];return"none"!==computedTransform?-1*parseInt(computedTransform.match(/(-?[0-9]+)/g)[4],10):0},getTop:function($elem){var computedTransform=getComputedStyle($elem[0])[prefixedTransform];return"none"!==computedTransform?-1*parseInt(computedTransform.match(/(-?[0-9]+)/g)[5],10):0}}},positionProperty={position:{setLeft:function($elem,left){$elem.css("left",left)},setTop:function($elem,top){$elem.css("top",top)}},transform:{setPosition:function($elem,left,startingLeft,top,startingTop){$elem[0].style[prefixedTransform]="translate3d("+(left-startingLeft)+"px, "+(top-startingTop)+"px, 0)"}}},vendorPrefix=function(){var prop,prefixes=/^(Moz|Webkit|Khtml|O|ms|Icab)(?=[A-Z])/,style=$("script")[0].style,prefix="";for(prop in style)if(prefixes.test(prop)){prefix=prop.match(prefixes)[0];break}return"WebkitOpacity"in style&&(prefix="Webkit"),"KhtmlOpacity"in style&&(prefix="Khtml"),function(property){return prefix+(prefix.length>0?property.charAt(0).toUpperCase()+property.slice(1):property)}}(),prefixedTransform=vendorPrefix("transform"),supportsBackgroundPositionXY=$("<div />",{style:"background:#fff"}).css("background-position-x")!==undefined,setBackgroundPosition=supportsBackgroundPositionXY?function($elem,x,y){$elem.css({"background-position-x":x,"background-position-y":y})}:function($elem,x,y){$elem.css("background-position",x+" "+y)},getBackgroundPosition=supportsBackgroundPositionXY?function($elem){return[$elem.css("background-position-x"),$elem.css("background-position-y")]}:function($elem){return $elem.css("background-position").split(" ")},requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(callback){setTimeout(callback,1e3/60)};Plugin.prototype={init:function(){this.options.name=pluginName+"_"+Math.floor(1e9*Math.random()),this._defineElements(),this._defineGetters(),this._defineSetters(),this._handleWindowLoadAndResize(),this._detectViewport(),this.refresh({firstLoad:!0}),"scroll"===this.options.scrollProperty?this._handleScrollEvent():this._startAnimationLoop()},_defineElements:function(){this.element===document.body&&(this.element=window),this.$scrollElement=$(this.element),this.$element=this.element===window?$("body"):this.$scrollElement,this.$viewportElement=this.options.viewportElement!==undefined?$(this.options.viewportElement):this.$scrollElement[0]===window||"scroll"===this.options.scrollProperty?this.$scrollElement:this.$scrollElement.parent()},_defineGetters:function(){var self=this,scrollPropertyAdapter=scrollProperty[self.options.scrollProperty];this._getScrollLeft=function(){return scrollPropertyAdapter.getLeft(self.$scrollElement)},this._getScrollTop=function(){return scrollPropertyAdapter.getTop(self.$scrollElement)}},_defineSetters:function(){var self=this,scrollPropertyAdapter=scrollProperty[self.options.scrollProperty],positionPropertyAdapter=positionProperty[self.options.positionProperty],setScrollLeft=scrollPropertyAdapter.setLeft,setScrollTop=scrollPropertyAdapter.setTop;this._setScrollLeft="function"==typeof setScrollLeft?function(val){setScrollLeft(self.$scrollElement,val)}:$.noop,this._setScrollTop="function"==typeof setScrollTop?function(val){setScrollTop(self.$scrollElement,val)}:$.noop,this._setPosition=positionPropertyAdapter.setPosition||function($elem,left,startingLeft,top,startingTop){self.options.horizontalScrolling&&positionPropertyAdapter.setLeft($elem,left,startingLeft),self.options.verticalScrolling&&positionPropertyAdapter.setTop($elem,top,startingTop)}},_handleWindowLoadAndResize:function(){var self=this,$window=$(window);self.options.responsive&&$window.bind("load."+this.name,function(){self.refresh()}),$window.bind("resize."+this.name,function(){self._detectViewport(),self.options.responsive&&self.refresh()})},refresh:function(options){var self=this,oldLeft=self._getScrollLeft(),oldTop=self._getScrollTop();options&&options.firstLoad||this._reset(),this._setScrollLeft(0),this._setScrollTop(0),this._setOffsets(),this._findParticles(),this._findBackgrounds(),options&&options.firstLoad&&/WebKit/.test(navigator.userAgent)&&$(window).load(function(){var oldLeft=self._getScrollLeft(),oldTop=self._getScrollTop();self._setScrollLeft(oldLeft+1),self._setScrollTop(oldTop+1),self._setScrollLeft(oldLeft),self._setScrollTop(oldTop)}),this._setScrollLeft(oldLeft),this._setScrollTop(oldTop)},_detectViewport:function(){var viewportOffsets=this.$viewportElement.offset(),hasOffsets=null!==viewportOffsets&&viewportOffsets!==undefined;this.viewportWidth=this.$viewportElement.width(),this.viewportHeight=this.$viewportElement.height(),this.viewportOffsetTop=hasOffsets?viewportOffsets.top:0,this.viewportOffsetLeft=hasOffsets?viewportOffsets.left:0},_findParticles:function(){{var self=this;this._getScrollLeft(),this._getScrollTop()}if(this.particles!==undefined)for(var i=this.particles.length-1;i>=0;i--)this.particles[i].$element.data("stellar-elementIsActive",undefined);this.particles=[],this.options.parallaxElements&&this.$element.find("[data-stellar-ratio]").each(function(){var horizontalOffset,verticalOffset,positionLeft,positionTop,marginLeft,marginTop,$offsetParent,offsetLeft,offsetTop,$this=$(this),parentOffsetLeft=0,parentOffsetTop=0,tempParentOffsetLeft=0,tempParentOffsetTop=0;if($this.data("stellar-elementIsActive")){if($this.data("stellar-elementIsActive")!==this)return}else $this.data("stellar-elementIsActive",this);self.options.showElement($this),$this.data("stellar-startingLeft")?($this.css("left",$this.data("stellar-startingLeft")),$this.css("top",$this.data("stellar-startingTop"))):($this.data("stellar-startingLeft",$this.css("left")),$this.data("stellar-startingTop",$this.css("top"))),positionLeft=$this.position().left,positionTop=$this.position().top,marginLeft="auto"===$this.css("margin-left")?0:parseInt($this.css("margin-left"),10),marginTop="auto"===$this.css("margin-top")?0:parseInt($this.css("margin-top"),10),offsetLeft=$this.offset().left-marginLeft,offsetTop=$this.offset().top-marginTop,$this.parents().each(function(){var $this=$(this);return $this.data("stellar-offset-parent")===!0?(parentOffsetLeft=tempParentOffsetLeft,parentOffsetTop=tempParentOffsetTop,$offsetParent=$this,!1):(tempParentOffsetLeft+=$this.position().left,void(tempParentOffsetTop+=$this.position().top))}),horizontalOffset=$this.data("stellar-horizontal-offset")!==undefined?$this.data("stellar-horizontal-offset"):$offsetParent!==undefined&&$offsetParent.data("stellar-horizontal-offset")!==undefined?$offsetParent.data("stellar-horizontal-offset"):self.horizontalOffset,verticalOffset=$this.data("stellar-vertical-offset")!==undefined?$this.data("stellar-vertical-offset"):$offsetParent!==undefined&&$offsetParent.data("stellar-vertical-offset")!==undefined?$offsetParent.data("stellar-vertical-offset"):self.verticalOffset,self.particles.push({$element:$this,$offsetParent:$offsetParent,isFixed:"fixed"===$this.css("position"),horizontalOffset:horizontalOffset,verticalOffset:verticalOffset,startingPositionLeft:positionLeft,startingPositionTop:positionTop,startingOffsetLeft:offsetLeft,startingOffsetTop:offsetTop,parentOffsetLeft:parentOffsetLeft,parentOffsetTop:parentOffsetTop,stellarRatio:$this.data("stellar-ratio")!==undefined?$this.data("stellar-ratio"):1,width:$this.outerWidth(!0),height:$this.outerHeight(!0),isHidden:!1})})},_findBackgrounds:function(){var $backgroundElements,self=this,scrollLeft=this._getScrollLeft(),scrollTop=this._getScrollTop();this.backgrounds=[],this.options.parallaxBackgrounds&&($backgroundElements=this.$element.find("[data-stellar-background-ratio]"),this.$element.data("stellar-background-ratio")&&($backgroundElements=$backgroundElements.add(this.$element)),$backgroundElements.each(function(){var horizontalOffset,verticalOffset,marginLeft,marginTop,offsetLeft,offsetTop,$offsetParent,$this=$(this),backgroundPosition=getBackgroundPosition($this),parentOffsetLeft=0,parentOffsetTop=0,tempParentOffsetLeft=0,tempParentOffsetTop=0;if($this.data("stellar-backgroundIsActive")){if($this.data("stellar-backgroundIsActive")!==this)return}else $this.data("stellar-backgroundIsActive",this);$this.data("stellar-backgroundStartingLeft")?setBackgroundPosition($this,$this.data("stellar-backgroundStartingLeft"),$this.data("stellar-backgroundStartingTop")):($this.data("stellar-backgroundStartingLeft",backgroundPosition[0]),$this.data("stellar-backgroundStartingTop",backgroundPosition[1])),marginLeft="auto"===$this.css("margin-left")?0:parseInt($this.css("margin-left"),10),marginTop="auto"===$this.css("margin-top")?0:parseInt($this.css("margin-top"),10),offsetLeft=$this.offset().left-marginLeft-scrollLeft,offsetTop=$this.offset().top-marginTop-scrollTop,$this.parents().each(function(){var $this=$(this);return $this.data("stellar-offset-parent")===!0?(parentOffsetLeft=tempParentOffsetLeft,parentOffsetTop=tempParentOffsetTop,$offsetParent=$this,!1):(tempParentOffsetLeft+=$this.position().left,void(tempParentOffsetTop+=$this.position().top))}),horizontalOffset=$this.data("stellar-horizontal-offset")!==undefined?$this.data("stellar-horizontal-offset"):$offsetParent!==undefined&&$offsetParent.data("stellar-horizontal-offset")!==undefined?$offsetParent.data("stellar-horizontal-offset"):self.horizontalOffset,verticalOffset=$this.data("stellar-vertical-offset")!==undefined?$this.data("stellar-vertical-offset"):$offsetParent!==undefined&&$offsetParent.data("stellar-vertical-offset")!==undefined?$offsetParent.data("stellar-vertical-offset"):self.verticalOffset,self.backgrounds.push({$element:$this,$offsetParent:$offsetParent,isFixed:"fixed"===$this.css("background-attachment"),horizontalOffset:horizontalOffset,verticalOffset:verticalOffset,startingValueLeft:backgroundPosition[0],startingValueTop:backgroundPosition[1],startingBackgroundPositionLeft:isNaN(parseInt(backgroundPosition[0],10))?0:parseInt(backgroundPosition[0],10),startingBackgroundPositionTop:isNaN(parseInt(backgroundPosition[1],10))?0:parseInt(backgroundPosition[1],10),startingPositionLeft:$this.position().left,startingPositionTop:$this.position().top,startingOffsetLeft:offsetLeft,startingOffsetTop:offsetTop,parentOffsetLeft:parentOffsetLeft,parentOffsetTop:parentOffsetTop,stellarRatio:$this.data("stellar-background-ratio")===undefined?1:$this.data("stellar-background-ratio")})}))},_reset:function(){var particle,startingPositionLeft,startingPositionTop,background,i;for(i=this.particles.length-1;i>=0;i--)particle=this.particles[i],startingPositionLeft=particle.$element.data("stellar-startingLeft"),startingPositionTop=particle.$element.data("stellar-startingTop"),this._setPosition(particle.$element,startingPositionLeft,startingPositionLeft,startingPositionTop,startingPositionTop),this.options.showElement(particle.$element),particle.$element.data("stellar-startingLeft",null).data("stellar-elementIsActive",null).data("stellar-backgroundIsActive",null);for(i=this.backgrounds.length-1;i>=0;i--)background=this.backgrounds[i],background.$element.data("stellar-backgroundStartingLeft",null).data("stellar-backgroundStartingTop",null),setBackgroundPosition(background.$element,background.startingValueLeft,background.startingValueTop)},destroy:function(){this._reset(),this.$scrollElement.unbind("resize."+this.name).unbind("scroll."+this.name),this._animationLoop=$.noop,$(window).unbind("load."+this.name).unbind("resize."+this.name)},_setOffsets:function(){var self=this,$window=$(window);$window.unbind("resize.horizontal-"+this.name).unbind("resize.vertical-"+this.name),"function"==typeof this.options.horizontalOffset?(this.horizontalOffset=this.options.horizontalOffset(),$window.bind("resize.horizontal-"+this.name,function(){self.horizontalOffset=self.options.horizontalOffset()})):this.horizontalOffset=this.options.horizontalOffset,"function"==typeof this.options.verticalOffset?(this.verticalOffset=this.options.verticalOffset(),$window.bind("resize.vertical-"+this.name,function(){self.verticalOffset=self.options.verticalOffset()})):this.verticalOffset=this.options.verticalOffset},_repositionElements:function(){var particle,fixedRatioOffset,background,bgLeft,bgTop,newPositionLeft,newPositionTop,newOffsetLeft,newOffsetTop,i,scrollLeft=this._getScrollLeft(),scrollTop=this._getScrollTop(),isVisibleVertical=!0,isVisibleHorizontal=!0;if(this.currentScrollLeft!==scrollLeft||this.currentScrollTop!==scrollTop||this.currentWidth!==this.viewportWidth||this.currentHeight!==this.viewportHeight){for(this.currentScrollLeft=scrollLeft,this.currentScrollTop=scrollTop,this.currentWidth=this.viewportWidth,this.currentHeight=this.viewportHeight,i=this.particles.length-1;i>=0;i--)particle=this.particles[i],fixedRatioOffset=particle.isFixed?1:0,this.options.horizontalScrolling?(newPositionLeft=(scrollLeft+particle.horizontalOffset+this.viewportOffsetLeft+particle.startingPositionLeft-particle.startingOffsetLeft+particle.parentOffsetLeft)*-(particle.stellarRatio+fixedRatioOffset-1)+particle.startingPositionLeft,newOffsetLeft=newPositionLeft-particle.startingPositionLeft+particle.startingOffsetLeft):(newPositionLeft=particle.startingPositionLeft,newOffsetLeft=particle.startingOffsetLeft),this.options.verticalScrolling?(newPositionTop=(scrollTop+particle.verticalOffset+this.viewportOffsetTop+particle.startingPositionTop-particle.startingOffsetTop+particle.parentOffsetTop)*-(particle.stellarRatio+fixedRatioOffset-1)+particle.startingPositionTop,newOffsetTop=newPositionTop-particle.startingPositionTop+particle.startingOffsetTop):(newPositionTop=particle.startingPositionTop,newOffsetTop=particle.startingOffsetTop),this.options.hideDistantElements&&(isVisibleHorizontal=!this.options.horizontalScrolling||newOffsetLeft+particle.width>(particle.isFixed?0:scrollLeft)&&newOffsetLeft<(particle.isFixed?0:scrollLeft)+this.viewportWidth+this.viewportOffsetLeft,isVisibleVertical=!this.options.verticalScrolling||newOffsetTop+particle.height>(particle.isFixed?0:scrollTop)&&newOffsetTop<(particle.isFixed?0:scrollTop)+this.viewportHeight+this.viewportOffsetTop),isVisibleHorizontal&&isVisibleVertical?(particle.isHidden&&(this.options.showElement(particle.$element),particle.isHidden=!1),this._setPosition(particle.$element,newPositionLeft,particle.startingPositionLeft,newPositionTop,particle.startingPositionTop)):particle.isHidden||(this.options.hideElement(particle.$element),particle.isHidden=!0);for(i=this.backgrounds.length-1;i>=0;i--)background=this.backgrounds[i],fixedRatioOffset=background.isFixed?0:1,bgLeft=this.options.horizontalScrolling?(scrollLeft+background.horizontalOffset-this.viewportOffsetLeft-background.startingOffsetLeft+background.parentOffsetLeft-background.startingBackgroundPositionLeft)*(fixedRatioOffset-background.stellarRatio)+"px":background.startingValueLeft,bgTop=this.options.verticalScrolling?(scrollTop+background.verticalOffset-this.viewportOffsetTop-background.startingOffsetTop+background.parentOffsetTop-background.startingBackgroundPositionTop)*(fixedRatioOffset-background.stellarRatio)+"px":background.startingValueTop,setBackgroundPosition(background.$element,bgLeft,bgTop)}},_handleScrollEvent:function(){var self=this,ticking=!1,update=function(){self._repositionElements(),ticking=!1},requestTick=function(){ticking||(requestAnimFrame(update),ticking=!0)};this.$scrollElement.bind("scroll."+this.name,requestTick),requestTick()},_startAnimationLoop:function(){var self=this;this._animationLoop=function(){requestAnimFrame(self._animationLoop),self._repositionElements()},this._animationLoop()}},$.fn[pluginName]=function(options){var args=arguments;return options===undefined||"object"==typeof options?this.each(function(){$.data(this,"plugin_"+pluginName)||$.data(this,"plugin_"+pluginName,new Plugin(this,options))}):"string"==typeof options&&"_"!==options[0]&&"init"!==options?this.each(function(){var instance=$.data(this,"plugin_"+pluginName);instance instanceof Plugin&&"function"==typeof instance[options]&&instance[options].apply(instance,Array.prototype.slice.call(args,1)),"destroy"===options&&$.data(this,"plugin_"+pluginName,null)}):void 0},$[pluginName]=function(){var $window=$(window);return $window.stellar.apply($window,Array.prototype.slice.call(arguments,0))},$[pluginName].scrollProperty=scrollProperty,$[pluginName].positionProperty=positionProperty,window.Stellar=Plugin}(jQuery,this,document),$('a[href^="#"]').on("click",function(event){var target=$(this.href);target.length&&(event.preventDefault(),$("html, body").animate({scrollTop:target.offset().top},1e3))});